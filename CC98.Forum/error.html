<link rel="stylesheet" href="/static/lib/bootstrap/css/bootstrap.min.css" />
<link
  rel="stylesheet"
  href="/static/lib/bootstrap-icons/font/bootstrap-icons.min.css"
/>

<div class="container mt-3">
  <h2 class="lead text-center text-danger">哎呀，出错了</h2>
  <hr />

  <p>网站运行时发生了意外错误，网页内容无法正常显示。</p>
  <p>
    这样的错误可能是服务器故障导致的，也可能是因为网站在前辈的电脑中缓存的代码或者数据发生了意外。
  </p>
  <p>建议前辈按照下面的步骤依次尝试，看看能否解决问题：</p>
  <hr />
  <p>首先，请尝试<strong>强制刷新网页</strong>，具体的方法是：</p>
  <ul>
    <li>
      在 Windows 或者 Linux 电脑上，同时按下 <kbd>Ctrl+Shift+R</kbd> 或者
      <kbd>Ctrl+F5</kbd> 快捷键；
    </li>
    <li>
      在 MacOS 电脑上，同时按下 <kbd>Command+Shift+R</kbd> 或者
      <kbd>Ctrl+F5</kbd> 快捷键；
    </li>
  </ul>

  <hr />
  <p>
    如果强制刷新网页没有解决问题，请尝试<strong>清空本地缓存</strong>，单击下面的按钮可以进入操作页面：
  </p>
  <div><a class="btn btn-primary" href="/reset">立即清空本地缓存</a></div>

  <hr />
  <p>
    如果这两个办法都不能解决问题，请前辈
    <a href="mailto:contact@cc98.org">向 CC98 客服发送邮件</a
    >，或者用其它方式和管理员取得联系，并通过截图和文字说明详细描述遇到的具体状况。
  </p>

  <div class="accordion">
    <div class="accordion-item">
      <h2 class="accordion-header" id="error-detail-header">
        <button
          class="accordion-button"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#error-detail-panel"
          aria-expanded="true"
          aria-controls="error-detail-panel"
        >
          错误详细信息
        </button>
      </h2>
      <div
        id="error-detail-panel"
        class="accordion-collapse collapse show"
        aria-labelledby="error-detail-header"
        data-bs-parent="#error-detail-header"
      >
        <div class="accordion-body">
          <div class="alert alert-info">
            这里列出的是网站运行的代码遇到的错误详情，你可以将这些信息提供给管理团队，以便于技术人员找到并修复错误。
          </div>
          <dl>
            <dt>错误消息</dt>
            <dd id="error-text"></dd>
            <dt>错误来源</dt>
            <dd id="source-text"></dd>
            <dt>行号</dt>
            <dd id="line-text"></dd>
            <dt>列号</dt>
            <dd id="col-text"></dd>
          </dl>
        </div>
      </div>
    </div>
  </div>
</div>

<script
  type="text/javascript"
  src="/static/lib/bootstrap/js/bootstrap.bundle.min.js"
></script>
<script type="text/javascript">
  function init() {
    // 未发生错误时跳转回到主页
    if (!errorInfo) {
      location.href = "/";
    }

    document.title = "CC98 论坛 - 错误";

    document.querySelector("#error-text").innerText = errorInfo.event;
    document.querySelector("#source-text").innerText = errorInfo.source;
    document.querySelector("#line-text").innerText = errorInfo.line;
    document.querySelector("#col-text").innerText = errorInfo.col;

    delete errorInfo;
  }

  init();
</script>
